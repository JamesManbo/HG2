diff a/HG.WebApp/Views/TiepNhan/SuaHoSo.cshtml b/HG.WebApp/Views/TiepNhan/SuaHoSo.cshtml	(rejected hunks)
@@ -509,11 +509,11 @@
                         {
                             <div class="text-center">
                                <button type="submit" class="btn btn-primary"  onclick="window.location.href='/TiepNhan/TiepNhanHoSoMoi';">Thêm</button>
-                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.Add.ToString())">Chuyển xử lý</button>
+                               <button type="button" class="btn btn-primary" onclick="ChuyenXuLy(@Model.Id)">Chuyển xử lý</button>
                                @*<button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.SaveAndTranfer.ToString())">Sửa</button>*@
-                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.TraKQ.ToString())">In phiếu hẹn</button>
-                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.TraKQ.ToString())">In phiếu chuyển</button>
-                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.TraKQ.ToString())">Trả kết quả</button>
+                               <button type="button" class="btn btn-primary">In phiếu hẹn</button>
+                               <button type="button" class="btn btn-primary">In phiếu chuyển</button>
+                               <button type="button" class="btn btn-primary" onclick="TraKetQua(@Model.Id)">Trả kết quả</button>
                                <button type="button" class="btn btn-secondary" onclick="window.location.href='/TiepNhan/HoSoDangTiepNhan';">Đóng</button>
                             </div>
                         }
@@ -539,7 +539,141 @@
 
 <!-- Basic Modal -->
 
+<div class="modal fade" id="NotifyVHS" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
+    <div class="modal-dialog" role="document">
+        <div class="modal-content" style="border: 2px solid #0866c6;">
+            <div class="modal-header" style="background-color: #0866c6;">
+                <h5 class="modal-title" style="color:white" id="exampleModalLabel">Thông báo</h5>
+            </div>
+            <div class="modal-body" id="NotifyVHSTitle">
+                Lưu vai trò thành công !!!
+            </div>
+            <div class="modal-footer">
+                
+                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Đóng</button>
+            </div>
+        </div>
+    </div>
+</div>
+<div class="modal fade" id="TraKetQua" tabindex="-1">
+    <div class="modal-dialog">
+        <div class="modal-content">
+            <div class="modal-header widgettitle">
+                <h5 class="modal-title">TT trả kết quả hồ sơ</h5>
+                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
+            </div>
+            <div class="modal-body">
+                    <div class="row">
+                                <div class="form-group row mb-3">
+                                    <input type="hidden" id="UserID" name="UserID" />
+                                    <label class="col-sm-4 control-label">Tên người nhận</label>
+                                    <div class="col-md-8">
+                                        <input type="text" name="TenNguoiNhan" id="TenNguoiNhan" value="@Model.CreatedUid" class="form-control" />
+                                    </div>
+                                </div>
 
+                                 <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Số chứng thực</label>
+                                    <div class="col-md-8">
+                                        <input type="text" name="SoChungThuc" id="SoChungThuc" value="@Model.so_giay_to" class="form-control" />
+                                    </div>
+                               </div>
+                               <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Địa chỉ</label>
+                                    <div class="col-md-8">
+                                        <input type="text" name="DiaChi" id="DiaChi" value="@Model.dia_chi" class="form-control" />
+                                    </div>
+                               </div>
+                               
+                               <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Người xử lý</label>
+                                    <div class="col-md-8">
+                                        <select class="form-control" name="NguoiXuLy" id="NguoiXuLy">
+                                                    <option value="">Chọn người xử lý</option> 
+                                                    @if(LstNguoiDung != null)
+                                                    {
+                                                        foreach (var item in LstNguoiDung)
+                                                        {
+                                                            if (item.Id ==  Guid.Parse(Model.nguoi_xu_ly))
+                                                            {
+                                                                <option value="@item.Id" selected>@(item.ho_dem + item.ten)</option> 
+                                                            }else{
+                                                                <option value="@item.Id">@(item.ho_dem + item.ten)</option> 
+                                                            }
+                                                        }
+                                                    }
+                                        </select>
+                                    </div>
+                               </div>
+                                <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Người ký</label>
+                                    <div class="col-md-8">
+                                        <select class="form-control" name="NguoiKy" id="NguoiKy">
+                                                    <option value="">Chọn người ký</option> 
+                                                    @if(LstNguoiDung != null)
+                                                    {
+                                                        foreach (var item in LstNguoiDung)
+                                                        {
+                                                            <option value="@item.Id">@(item.ho_dem + item.ten)</option> 
+                                                        }
+                                                    }
+                                        </select>
+                                    </div>
+                               </div>
+                               <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Lệ Phí</label>
+                                    <div class="col-md-7">
+                                        <input type="text" name="LePhi" id="LePhi" value="@Model.le_phi" class="form-control" />
+                                    </div>
+                                    <label class="col-md-1 control-label">Vnđ</label>
+                               </div>
+                               <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Đã thu phí</label>
+                                    <div class="col-md-8">
+                                        <input type="checkbox" onclick=ThuPhiHoSo()" name="DaThuPhi" @(Model.da_thu_phi == 1 ? "checked": "") id="DaThuPhi" /> 
+                                    <script>
+                                        function ThuPhiHoSo() {
+                                            if ($('#DaThuPhi').is(':checked')) {
+                                                $("#DaThuPhi").val(1)
+                                            }else{
+                                                $("#DaThuPhi").val(0)
+                                            }
+                                        }
+                                    </script>
+                                    </div>
+                               </div>
+                               <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Ý kiến</label>
+                                    <div class="col-md-8">
+                                        <textarea type="text" name="YKien" id="YKien" class="form-control">@Model.y_kien</textarea> 
+                                    </div>
+                               </div>
+                                <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Đính kèm</label>
+                                    <div class="col-md-8">
+                                        <div class="input-append">
+                                            <input type="file" id="filesDinhKem" name="files" style="display: none">
+                                             <input type="text" id="namefilesDinhKem" name="namefilesDinhKem" style="display: none">
+                                             <button type="button" onclick="$('#filesDinhKem').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
+                                             <label type="text" id="dis-filesDinhKem" name="dis-filesDinhKem"  readonly></label> 
+                                        </div>                                      
+                                    </div>
+                               </div>
+                               <div class="form-group row mb-3">
+                                    <label class="col-sm-4 control-label">Ngày trả kết quả</label>
+                                    <div class="col-md-8">
+                                        <input type="date" name="NgayTraKetQua" id="NgayTraKetQua" value="@HG.WebApp.Common.HelperDateTime.DateTimeToYYYYMMDD((DateTime)Model.ngay_hen_tra)" class="form-control" />
+                                    </div>
+                               </div>
+                        </div>
+            </div>
+            <div class="modal-footer">
+                <button type="button" class="btn btn-primary" onclick="CapNhatKetQua()">Cập nhật kết quả</button>
+                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Đóng</button>
+            </div>
+        </div>
+    </div>
+</div>
 
 
 <script>
@@ -599,6 +733,44 @@
                 return false;
             }
         });
+
+        $("#filesDinhKem").on('change', function () {
+                                                                                    // Checking whether FormData is available in browser
+             if (window.FormData !== undefined) {
+                 var fileUpload = $(this).get(0);
+                 var files = fileUpload.files;
+                 // Create FormData object
+                 var fileData = new FormData();
+                 // Looping over all files and add it to FormData object
+                 for (var i = 0; i < files.length; i++) {
+                     fileData.append(files[i].name, files[i]);
+                 }
+                 // Adding one more key to FormData object
+                 fileData.append('username', 'Manas');
+                 $.ajax({
+                     url: '/Upload/UploadFilesTP?folder=TraKQDinhKem&Id=@Model.Id' ,
+                     type: "POST",
+                     contentType: false, // Not to set any content header
+                     processData: false, // Not to process data
+                     data: fileData,
+                     success: function (result) {
+                         console.log(result);
+                         for (var i = 0; i < result.files.length; i++) {
+                               $('#namefilesDinhKem').attr('value', result.files[i]);
+                               $('#dis-filesDinhKem').html(""+result.names+"");
+                         }
+                     },
+                     error: function (err) {
+                         alert(err.statusText);
+                     }
+                 });
+             } else {
+                 alert("FormData is not supported.");
+             }
+         });
+
+
+
     });
     function CheckedCode(abc){
          //$.ajax({
@@ -615,7 +787,37 @@
          //         }
          // });           
     }
-     
+    function ChuyenXuLy(ho_so_id){
+         $.ajax({
+                  type: "GET",
+                  url: "/ApiHoSo/ChuyenXuLy?ho_so_id=" + ho_so_id,
+                  data: "",
+                  contentType: 'application/json; charset=utf-8',
+                  success: function(data) {
+                      $("#NotifyVHSTitle").html(data);
+                      $("#NotifyVHS").modal("show");
+                  }
+          });           
+    }
+    function TraKetQua(ho_so_id){
+         $("#TraKetQua").modal("show");
+    }
+    function CapNhatKetQua(){
+         $.ajax({
+                  type: "GET",
+                  url: "/ApiHoSo/TraKetQua?ho_so_id=" + ho_so_id,
+                  data: "",
+                  contentType: 'application/json; charset=utf-8',
+                  success: function(data) {
+                      $("#NotifyVHSTitle").html(data);
+                      $("#NotifyVHS").modal("show");
+                  }
+          });           
+
+
+
+        alert("cập nhật kết quả thành công!");
+    }
 </script>
 
 
