@using HG.WebApp
@{
    ViewData["Title"] = "Tiếp nhận hồ sơ"; 
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
   var LstLinhVuc = ViewBag.LstLinhVuc as List<HG.Entities.Dm_Linh_Vuc>; 
   //var LstThuTuc = ViewBag.LstThuTuc as List<HG.Entities.Dm_Thu_Tuc>;
   var LstThuTuc = ViewBag.LstThuTuc as List<HG.Entities.Entities.ThuTuc.DmThuTuc>;
   var LstLuongXL = ViewBag.LstLuongXL as List<HG.Entities.Dm_Luong_Xu_Ly>;
   var LstNguoiDung = ViewBag.LstNguoiDung as List<HG.Entities.AspNetUsersModel>;
}
@model HG.Entities.HoSo.Ho_So
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">-
        <div class="modal-content" style="border: 2px solid #0866c6;">
            <div class="modal-header" style="background-color: #0866c6;">
                <h5 class="modal-title" style="color:white" id="exampleModalLabel">Thông báo</h5>
            </div>
            <div class="modal-body">
                @ViewBag.ErrorMsg
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-footer-btnclose" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>
@if (ViewBag.ErrorCode > 0)
{
    <script>
        $(document).ready(function() {
            $("#exampleModal").modal("show");
        });
    </script>
}
<style>
    .underline-partion {
    width: 100%;
    border-bottom: 1px solid #f0ad4e;
    margin-bottom: 20px;
    font-style: italic;
    font-weight: bold;
    padding-bottom: 4px;
}
.label-warning {
    background-color: #f0ad4e;
}
</style>
<div class="card">
    <div class="pageheader">
        <div class="pageicon"><span class="iconfa-pencil"></span></div>
        <div class="pagetitle">
            <h5>Thông tin</h5>
            <h1>Hồ sơ</h1>
        </div>
    </div>


    <div class="maincontent">
        <div class="maincontentinner">
            <h4 class="widgettitle">Tiếp nhận hồ sơ</h4>
            <div class="widgetcontent">
                <div class="form-horizontal">
                    <a href="/Luong/SuaLuongXuLy?code=@Model.ma_luong_xu_ly&type=View" style="text-decoration:none"> Luồng xử lý hồ sơ</a>
                    <form id="form_tiepnhan" action="/TiepNhan/TiepNhanHoSoMoi" method="post" enctype="multipart/form-data" class="row">
                            <div class="underline-partion">
                                     <p id="ctl14_p_KLT" class="label label-warning lable-partion">Thông tin khách hàng</p>
                            </div>  
                            <input hidden name="Id" value="@Model.Id" />
                            <input hidden name="trang_thai" value="@Model.trang_thai" />
                                <div class="form-group row mb-3">
                                        <label for="ma_pb" class="col-sm-1 control-label">Mã khách hàng</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control input-default" onfocusout="CheckedCode(this)" maxlength="50" name="ma_khach_hang"  id="ma_khach_hang" value="@Model.ma_khach_hang" placeholder="Nhập CMT hoặc mã khách hàng đã có" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                        </div>
                                        <label for="ten_pb" class="col-sm-1 control-label">Tìm kiếm </label>
                                        <div class="col-sm-7">
                                            <input type="checkbox" value="">
                                        </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Họ và tên<span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                       <input  type="text" id="ho_ten" name="ho_ten" maxlength="50" class="form-control input-default" value="@Model.ho_ten" placeholder="Nhập họ tên" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="stt" class="col-sm-1 control-label">Ngày sinh <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                        <input type="date" class="form-control input-default" name="ngay_sinh" value="@(HG.WebApp.Common.HelperDateTime.DateTimeToYYYYMMDD((DateTime)Model.ngay_sinh))" placeholder="Nhập ngày sinh" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="nguoi_sua" class="col-sm-1 control-label">Giới tính <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                         <select class="dataTable-selector form-control" name="gioi_tinh" id="gioi_tinh" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                            <option value="0" selected>Chọn giới tính</option>
                                            @foreach (var item in HG.WebApp.Helper.HelperString.ListGenders())
                                            {
                                                if(item.key == Model.gioi_tinh){
                                                    <option value="@item.key" selected>@item.name</option>
                                                }else{<option value="@item.key">@item.name</option>}
                                                
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Số giấy tờ<span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                       <input maxlength="50" type="text" id="so_giay_to" name="so_giay_to" class="form-control input-default" value="@Model.so_giay_to" placeholder="Nhập số giấy tờ" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="stt" class="col-sm-1 control-label">Điện thoại <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                        <input maxlength="50" type="text" id="dien_thoai" class="form-control input-default" name="dien_thoai" value="@Model.dien_thoai" placeholder="Nhập điện thoại" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="nguoi_sua" class="col-sm-1 control-label">Email <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                       <input maxlength="50" type="text" class="form-control input-default" id="email" name="email" value="@Model.email" placeholder="Nhập email" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")/>
                                    </div>
                                </div>
                                 <div class="form-group row mb-3">
                                    <label for="dia_chi" class="col-sm-1 control-label">Địa chỉ <span style="color:red">(*)</span></label>
                                    <div class="col-sm-11">
                                        <input maxlength="250" type="text" class="form-control input-default" id="dia_chi" name="dia_chi" value="@Model.dia_chi" placeholder="Nhập tên địa chỉ" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="ten_to_chuc" class="col-sm-1 control-label">Tên cơ quan</label>
                                    <div class="col-sm-11">
                                        <input maxlength="50" type="text" class="form-control input-default" id="ten_to_chuc" name="ten_to_chuc" value="@Model.ten_to_chuc" placeholder="Nhập tên cơ quan" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                </div>
                            <div class="underline-partion">
                                     <p id="ctl14_p_KLT" class="label label-warning lable-partion">Thông tin hồ sơ</p>
                            </div>  
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Tên hồ sơ<span style="color:red">(*)</span></label>
                                    <div class="col-sm-11">
                                       <input maxlength="50" type="text" id="ten_ho_so" name="ten_ho_so" class="form-control input-default" value="@Model.ten_ho_so" placeholder="Nhập tên hồ sơ" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Lĩnh vực<span style="color:red">(*)</span></label>
                                    <div class="col-sm-11">
                                           <select name="ma_linh_vuc" id="ma_linh_vuc" class="form-control input-default" onchange="LayThuTucByLinhVuc(this)" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "") >
				                                 <option value="">Chọn lĩnh vực</option> 
                                                @if(LstLinhVuc != null)
                                                {
                                                    foreach (var item in LstLinhVuc)
                                                    {
                                                        if(Model.ma_linh_vuc == item.ma_linh_vuc)
                                                        {
                                                            <option value="@item.ma_linh_vuc" selected>@item.ten_linh_vuc</option> 
                                                        }
                                                        else
                                                        {
                                                            <option value="@item.ma_linh_vuc">@item.ten_linh_vuc</option> 
                                                        }
                                            
                                                    }
                                                }
			                                </select>
                                    </div>
                                </div>
                                 <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Thủ tục hành chính<span style="color:red">(*)</span></label>
                                    <div class="col-sm-11">
                                        <select name="ma_thu_tuc_hc" id="ma_thu_tuc_hc" class="form-control input-default" onchange="GetLuongByTTHC(this)" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
				                                 <option value="">Chọn thủ tục hành chính</option> 
                                                @if(LstThuTuc != null)
                                                {
                                                    foreach (var item in LstThuTuc)
                                                    {
                                                        if ( item.ma_thu_tuc ==Model.ma_thu_tuc_hc)
                                                        {
                                                            <option value="@item.ma_thu_tuc" selected>@item.ten_thu_tuc</option> 
                                                        }
                                                        else
                                                        {
                                                            <option value="@item.ma_thu_tuc">@item.ten_thu_tuc</option> 
                                                        }
                                            
                                                    }
                                                }
			                            </select>
                                    </div>
                                </div>
                                <script>
                                     function LayThuTucByLinhVuc(data){
                                        $.ajax({
                                           type: "GET",
                                           url: "../TiepNhan/LayThuTucByLinhVuc?ma_linh_vuc=" + data.value,
                                           data: "",
                                           contentType: 'application/json; charset=utf-8',
                                           success: function(data) {
                                               $("#ThuTucXL").html(data);
                                           }
                                       });          
                                    }
                                    function GetLuongByTTHC(data){
                                        $.ajax({
                                           type: "GET",
                                           url: "../TiepNhan/LayLuongThanhPhanByMaTTHC?ma_thu_tuc=" + data.value + "&type=Add" + "&ma_luong=" + $("#ma_luong_xu_ly").val(),
                                           data: "",
                                           contentType: 'application/json; charset=utf-8',
                                           success: function(data) {
                                               $("#LuongXuLy").html(data);
                                           }
                                       });          
                                    } 
                                    function GetNguoiXLNguoiPH(ma_luong_data) {
                                          $.ajax({
                                           type: "GET",
                                           url: "../TiepNhan/GetNguoiXLNguoiPH?ma_luong=" + ma_luong_data.value,
                                           data: "",
                                           contentType: 'application/json; charset=utf-8',
                                           success: function(data) {
                                              //$("#nguoi_xu_ly select").val(data.nguoi_xl_mac_dinh).change();
                                              console.log(data.nguoi_xl_mac_dinh)
                                              $("#nguoi_xu_ly").val(data.nguoi_xl_mac_dinh);
                                           }
                                       });        
                                    }
                                </script>
                                <div id="LuongXuLy" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    @Html.RenderAction("GetTPByTTHCInPartial","TiepNhan", new {ma_thu_tuc = Model.ma_thu_tuc_hc, type = ViewBag.type_view, ma_luong = Model.ma_luong_xu_ly , lstThanhPhan = Model.lstThanhPhan, hosoid = Model.Id})
                                </div>
                                <div class="form-group row mb-3">
                                    <label class="col-sm-1 control-label"></label>
                                    <label for="mota" class="col-sm-2 control-label" style="text-align: left;">
                                        <p style="color:blue; cursor: pointer" onclick="ThemThanhPhanHoSo()" @(ViewBag.type_view == StatusAction.View.ToString() ? "hidden" : "")><i class="glyphicon glyphicon-plus"></i>&nbsp;Thêm thành phần hồ sơ</p>
                                        <input id="ThemTPHS" name="ThemTPHS" value="1" hidden />
                                        <input id="lstThanhPhan" name="lstThanhPhan" value="@Model.lstThanhPhan" hidden />
                                    </label>
                                </div>
                                <script>
                                    function ThemThanhPhanHoSo(){
                                       var _id = $("#ThemTPHS").val();
                                        if(_id < 6){
                                             $("#"+ _id +"").show();
                                             $("input[name=ThemTPHS]").val((parseInt(_id) + 1))
                                        }
                                    }
                                    function XoaThanhPhan(_id) {
                                       $("#"+ _id +"").css("display", "none");
                                        $("input[name=ThemTPHS]").val((parseInt(_id) - 1))
                                    }
                                </script>
                                 <div class="form-group row mb-3" id="1" style="display:none">
                                            <label class="col-md-1 control-label">Tên&nbsp;<span id="ctl14_Label3" style="color:Red;">(*)</span></label>
                                            <div class="col-md-2">
                                                <input name="ThanhPhan_1" type="text" id="ThanhPhan_1" class="form-control input-default-sm" placeholder="Nhập tên thành phần">
                                            </div>
                                            <div class="col-md-2">
                                                 <input type="file" id="files1" name="files1" style="display: none">
                                                 <input type="text" id="file_dinh_kem1" name="file_dinh_kem1" style="display: none">
                                                 <button type="button" onclick="$('#files1').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
                                                  <label type="text" id="namefile1" name="namefile1"></label> <input type="button" id="btnDelete1" class="btn" style="background-color: gainsboro; color: blue; display: none" value="Xóa" onclick="DeleteFileDinhKemTP(1)">
                                            </div>
                                            <label class="col-md-1 control-label">Bản chính</label>
                                            <div class="col-md-1">
                                                <input name="BanChinh1" type="number" value="0" id="BanChinh1" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản sao</label>
                                            <div class="col-md-1">
                                                <input name="BanSao1" type="number" value="0" id="BanSao1" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản photo</label>
                                            <div class="col-md-1">
                                                <input name="BanPhoto1" type="number" value="0" id="BanPhoto1" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1"><a href="#" onclick="XoaThanhPhan(1)" class="btnremove"><i class="glyphicon glyphicon-remove"></i>&nbsp;Xóa</a></label>
                                </div>
                                 <div class="form-group row mb-3" id="2"  style="display:none">
                                            <label class="col-md-1 control-label">Tên&nbsp;<span id="ctl14_Label3" style="color:Red;">(*)</span></label>
                                            <div class="col-md-2">
                                                <input name="ThanhPhan_2" type="text" id="ThanhPhan_2" class="form-control input-default-sm" placeholder="Nhập tên thành phần">
                                            </div>
                                            <div class="col-md-2">
                                                 <input type="file" id="files2" name="files2" style="display: none">
                                                 <input type="text" id="file_dinh_kem2" name="file_dinh_kem2" style="display: none">
                                                 <button type="button" onclick="$('#files2').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
                                                  <label type="text" id="namefile2" name="namefile2"></label> <input type="button" id="btnDelete2" class="btn" style="background-color: gainsboro; color: blue; display: none" value="Xóa" onclick="DeleteFileDinhKemTP(2)">
                                             </div>
                                            <label class="col-md-1 control-label">Bản chính</label>
                                            <div class="col-md-1">
                                                <input name="BanChinh2" type="number" value="0" id="BanChinh2" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản sao</label>
                                            <div class="col-md-1">
                                                <input name="BanSao2" type="number" value="0" id="BanSao2" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản photo</label>
                                            <div class="col-md-1">
                                                <input name="BanPhoto2" type="number" value="0" id="BanPhoto2" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1"><a href="#" onclick="XoaThanhPhan(2)" class="btnremove"><i class="glyphicon glyphicon-remove"></i>&nbsp;Xóa</a></label>
                                </div>
                                 <div class="form-group row mb-3" id="3"  style="display:none">
                                            <label class="col-md-1 control-label">Tên&nbsp;<span id="ctl14_Label3" style="color:Red;">(*)</span></label>
                                            <div class="col-md-2">
                                                <input name="" type="text" id="ThanhPhan_3" class="form-control input-default-sm" placeholder="Nhập tên thành phần">
                                            </div>
                                            <div class="col-md-2">
                                                 <input type="file" id="files3" name="files3" style="display: none">
                                                 <input type="text" id="file_dinh_kem3" name="file_dinh_kem3" style="display: none">
                                                 <button type="button" onclick="$('#files3').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
                                                  <label type="text" id="namefile3" name="namefile3"></label> <input type="button" id="btnDelete3" class="btn" style="background-color: gainsboro; color: blue; display: none" value="Xóa" onclick="DeleteFileDinhKemTP(3)">
                                             </div>
                                            <label class="col-md-1 control-label">Bản chính</label>
                                            <div class="col-md-1">
                                                <input name="BanChinh3" type="number" value="0" id="BanChinh3" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản sao</label>
                                            <div class="col-md-1">
                                                <input name="BanSao3" type="number" value="0" id="BanSao3" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản photo</label>
                                            <div class="col-md-1">
                                                <input name="BanPhoto3" type="number" value="0" id="BanPhoto3" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1"><a href="#" onclick="XoaThanhPhan(3)" class="btnremove"><i class="glyphicon glyphicon-remove"></i>&nbsp;Xóa</a></label>
                                </div>
                                 <div class="form-group row mb-3" id="4"  style="display:none">
                                            <label class="col-md-1 control-label">Tên&nbsp;<span id="ctl14_Label3" style="color:Red;">(*)</span></label>
                                            <div class="col-md-2">
                                                <input name="" type="text" id="ThanhPhan_4" class="form-control input-default-sm" placeholder="Nhập tên thành phần">
                                            </div>
                                            <div class="col-md-2">
                                                 <input type="file" id="files4" name="files4" style="display: none">
                                                 <input type="text" id="file_dinh_kem4" name="file_dinh_kem4" style="display: none">
                                                 <label type="text" id="namefile4" name="namefile4"></label> <input type="button" id="btnDelete4" class="btn" style="background-color: gainsboro; color: blue; display: none" value="Xóa" onclick="DeleteFileDinhKemTP()">
                                                 <button type="button" onclick="$('#files4').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
                                            </div>
                                            <label class="col-md-1 control-label">Bản chính</label>
                                            <div class="col-md-1">
                                                <input name="BanChinh4" type="text" value="0" id="BanChinh4" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản sao</label>
                                            <div class="col-md-1">
                                                <input name="BanSao4" type="text" value="0" id="BanSao4" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản photo</label>
                                            <div class="col-md-1">
                                                <input name="BanPhoto4" type="text" value="0" id="BanPhoto4" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1"><a href="#" onclick="XoaThanhPhan(4)" class="btnremove">Xóa</a></label>
                                </div>
                                 <div class="form-group row mb-3" id="5"  style="display:none">
                                            <label class="col-md-1 control-label">Tên&nbsp;<span id="ctl14_Label3" style="color:Red;">(*)</span></label>
                                            <div class="col-md-2">
                                                <input name="ThanhPhan_5" type="text" id="ThanhPhan_5" class="form-control input-default-sm" placeholder="Nhập tên thành phần">
                                            </div>
                                            <div class="col-md-2">
                                                 <input type="file" id="files5" name="files5" style="display: none">
                                                 <input type="text" id="file_dinh_kem5" name="file_dinh_kem5" style="display: none">
                                                 <label type="text" id="namefile5" name="namefile5"></label> <input type="button" id="btnDelete5" class="btn" style="background-color: gainsboro; color: blue; display: none" value="Xóa" onclick="DeleteFileDinhKemTP()">
                                                 <button type="button" onclick="$('#files5').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
                                            </div>
                                            <label class="col-md-1 control-label">Bản chính</label>
                                            <div class="col-md-1">
                                                <input name="BanChinh5" type="text" value="0" id="BanChinh5" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản sao</label>
                                            <div class="col-md-1">
                                                <input name="BanSao5" type="text" value="0" id="BanSao5" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1 control-label">Bản photo</label>
                                            <div class="col-md-1">
                                                <input name="BanPhoto5" type="text" value="0" id="BanPhoto5" class="form-control input-default-sm">
                                            </div>
                                            <label class="col-md-1"><a href="#" onclick="XoaThanhPhan(5)" class="btnremove">Xóa</a></label>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Ghi chú</label>
                                    <div class="col-sm-11">
                                        <input maxlength="50" type="text" id="ghi_chu" name="ghi_chu" class="form-control input-default" value="@Model.ghi_chu" placeholder="Nhập tên hồ sơ">
                                    </div>
                                </div>

                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-3 control-label">Đăng ký nhận kết quả</label>
                                   <label for="mota" class="col-sm-2 control-label">Nhận kết quả trực tuyến</label>
                                    <div class="col-md-1">
                                       <input  type="checkbox" id="nhan_kq_truc_tuyen" onclick="NhanKQTT()" name="nhan_kq_truc_tuyen" @(Model.nhan_kq_truc_tuyen == 1 ? "checked": "") value="@Model.nhan_kq_truc_tuyen" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="stt" class="col-sm-2 control-label">Bộ phận một cửa</label>
                                    <div class="col-md-1">
                                        <input maxlength="50" type="checkbox" onclick="NhanKQBPMC()" id="nhan_kq_bo_phan_mot_cua" @(Model.nhan_kq_bo_phan_mot_cua == 1 ? "checked": "") name="nhan_kq_bo_phan_mot_cua" value="@Model.nhan_kq_bo_phan_mot_cua" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="nguoi_sua" class="col-sm-2 control-label">Qua bưu chính</label>
                                    <div class="col-md-1">
                                       <input maxlength="50" type="checkbox" onclick="NhanKQQABC()" id="nhan_kq_qua_buu_chinh" name="nhan_kq_qua_buu_chinh" @(Model.nhan_kq_qua_buu_chinh == 1 ? "checked": "") name="nhan_kq_qua_buu_chinh" value="@Model.nhan_kq_qua_buu_chinh" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "") />
                                    </div>
                                </div>
                                <div id="NhanKQBC" hidden>
                                     <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Họ và tên</label>
                                    <div class="col-md-3">
                                         <input type="text" id="ho_ten_bc" name="ho_ten_bc" maxlength="50" class="form-control input-default" value="@Model.ho_ten" placeholder="Nhập họ và tên">
                                    </div>
                                     <label for="stt" class="col-sm-1 control-label">Điện thoại </label>
                                    <div class="col-md-3">
                                         <input maxlength="50" type="text" id="dien_thoai_bc" class="form-control input-default" name="dien_thoai_bc" value="@Model.dien_thoai" placeholder="Số điện thoại chỉ nhập dạng số">
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="dia_chi" class="col-sm-1 control-label">Địa chỉ</label>
                                    <div class="col-sm-3">
                                        <input maxlength="250" type="text" class="form-control input-default" id="dia_chi_bc" name="dia_chi_bc" value="@Model.dia_chi" placeholder="Nhập tên địa chỉ">
                                    </div>
                                     <label for="stt" class="col-sm-1 control-label">Tỉnh thành</label>
                                    <div class="col-md-3">
                                         <select class="dataTable-selector form-control" name="tinh_thanh" id="tinh_thanh" >
                                            <option value="0" selected>Chọn tỉnh thành</option>
                                            <option value="HG">Hà Giang</option>
                                           
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="dia_chi" class="col-sm-1 control-label">Ghi chú</label>
                                    <div class="col-sm-11">
                                        <input maxlength="250" type="text" class="form-control input-default" id="ghi_chu" name="ghi_chu" value="@Model.dia_chi" placeholder="Nhập tên địa chỉ">
                                    </div>
                                    
                                </div>
                                </div>
                                <script>
                                    function NhanKQTT(){
                                         if ($('input[name=nhan_kq_truc_tuyen]:checked').length > 0) {
                                            $("#nhan_kq_truc_tuyen").val(1)
                                         } else { 
                                             ("#nhan_kq_truc_tuyen").val(0)
                                         }
                                    } function NhanKQBPMC(){
                                         if ($('input[name=nhan_kq_bo_phan_mot_cua]:checked').length > 0) {
                                            $("#nhan_kq_bo_phan_mot_cua").val(1)
                                         } else { 
                                             ("#nhan_kq_bo_phan_mot_cua").val(0)
                                         }
                                    } function NhanKQQABC(){
                                        let element = document.getElementById("NhanKQBC");
                                         let hidden = element.getAttribute("hidden");
                                         if ($('input[name=nhan_kq_qua_buu_chinh]:checked').length > 0) {
                                            $("#nhan_kq_qua_buu_chinh").val(1)
                                             element.removeAttribute("hidden");
                                         } else { 
                                             $("#nhan_kq_qua_buu_chinh").val(0)
                                             element.setAttribute("hidden", "hidden");
                                         }
                                    } function DaThuPhi(){
                                        if ($('input[name=le_phi]:checked').length > 0) {
                                            $("#le_phi").val(1)
                                         } else { 
                                             ("#le_phi").val(0)
                                         }
                                    } function ChuaDuDieuKien() {
                                        if ($('input[name=ho_so_chua_du_dk_tiep_nhan_chinh_thuc]:checked').length > 0) {
                                            $("#ho_so_chua_du_dk_tiep_nhan_chinh_thuc").val(1)
                                         } else { 
                                             ("#ho_so_chua_du_dk_tiep_nhan_chinh_thuc").val(0)
                                         } 
                                    }
                                </script>
                            <div class="underline-partion">
                                     <p id="ctl14_p_KLT" class="label label-warning lable-partion">Thông tin chuyển xử lý</p>
                            </div>  
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Người xử lý</label>
                                    <div class="col-sm-11">
                                        <select name="nguoi_xu_ly" id="nguoi_xu_ly" class="form-control input-default" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
				                                 <option value="">Chọn người xử lý</option> 
                                                @if(LstNguoiDung != null)
                                                {
                                                    foreach (var item in LstNguoiDung)
                                                    {
                                                        if (item.Id ==  Guid.Parse(Model.nguoi_xu_ly))
                                                        {
                                                            <option value="@item.Id" selected>@(item.ho_dem + item.ten)</option> 
                                                        }else{
                                                            <option value="@item.Id">@(item.ho_dem + item.ten)</option> 
                                                        }
                                                    }
                                                }
			                            </select>
                                    </div>
                                </div>
                                 <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Người phối hợp</label>
                                    <div class="col-sm-11">
                                         <select name="nguoi_phoi_hop" id="nguoi_phoi_hop" class="form-control input-default" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
				                                <option value="">Chọn người phối hợp</option> 
                                                @if(LstNguoiDung != null)
                                                {
                                                    foreach (var item in LstNguoiDung)
                                                    {
                                                       if ((Model.nguoi_phoi_hop ?? "").ToLower().Contains(item.Id.ToString()))
                                                        {
                                                            <option value="@item.Id" selected>@(item.ho_dem + item.ten)</option> 
                                                        }else{
                                                            <option value="@item.Id">@(item.ho_dem + item.ten)</option> 
                                                        }
                                                    }
                                                }
			                            </select>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Người tiếp nhận<span style="color:red">(*)</span></label>
                                    <div class="col-sm-11">
                                        <input maxlength="50" disabled type="text" id="nguoi_tiep_nhan" name="nguoi_tiep_nhan" class="form-control input-default" value="@(HG.WebApp.Helper.HelperSql.GetFullName(Model.CreatedUid) )" placeholder="Nhập người tiếp nhận" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Ngày tiếp nhận<span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                       <input maxlength="50" type="date" disabled id="CreatedDateUtc" name="CreatedDateUtc" class="form-control input-default" value="@(HG.WebApp.Common.HelperDateTime.DateTimeToYYYYMMDD((DateTime)Model.CreatedDateUtc))" placeholder="Nhập số giấy tờ">
                                    </div>
                                     <label for="stt" class="col-sm-1 control-label">Ngày hẹn trả <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                        <input maxlength="50" type="date" id="ngay_hen_tra" class="form-control input-default" name="ngay_hen_tra" value="@HG.WebApp.Common.HelperDateTime.DateTimeToYYYYMMDD((DateTime)Model.ngay_hen_tra)" placeholder="Nhập điện thoại" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="nguoi_sua" class="col-sm-1 control-label">Giờ hẹn trả <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                       <input maxlength="50" type="time" class="form-control input-default" id="gio_hen_tra" name="gio_hen_tra" value="@(HG.WebApp.Common.HelperDateTime.DateTimeToHHmm((DateTime)Model.gio_hen_tra))" placeholder="Nhập giờ hẹn trả" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "") />
                                    </div>
                                </div>
                                 <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-3 control-label" style="color:red">Hồ sơ chưa đủ điều kiện tiếp nhận chính thức</label>
                                    <div class="col-sm-8">
                                        <input type="checkbox" onclick="ChuaDuDieuKien()" @(Model.ho_so_chua_du_dk_tiep_nhan_chinh_thuc == 1 ? "Checked": "") value="@Model.ho_so_chua_du_dk_tiep_nhan_chinh_thuc" placeholder="Nhập người tiếp nhận" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "") />
                                    </div>
                                </div>
                                <div class="underline-partion">
                                     <p id="ctl14_p_KLT" class="label label-warning lable-partion">Thông tin chuyển lệ phí</p>
                                </div> 
                                <div class="form-group row mb-3">
                                    <label for="mota" class="col-sm-1 control-label">Lệ phí<span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                       <input maxlength="50" type="number" id="le_phi" onclick="DaThuPhi()" name="le_phi" class="form-control input-default" value="@Model.le_phi" placeholder="Nhập lệ phí">
                                    </div>
                                     <label for="stt" class="col-sm-1 control-label">Đã thu phí <span style="color:red">(*)</span></label>
                                    <div class="col-md-3">
                                        <input type="checkbox" id="da_thu_phi"  name="da_thu_phi" @(Model.da_thu_phi == 1 ? "Checked": "") value="@Model.da_thu_phi" @(ViewBag.type_view == StatusAction.View.ToString() ? "disabled" : "")>
                                    </div>
                                     <label for="nguoi_sua" class="col-sm-1 control-label"><a href="#" style="color:blue">Biên lai thu phí</a></label>
                                </div>
                        <div class="text-center">
                            
                            
                            
                            
                            
                        </div>
                         @if (ViewBag.type_view == StatusAction.View.ToString() && ViewBag.isSend == true )
                        {
                            <div class="text-center">
                               <button type="submit" class="btn btn-primary"  onclick="window.location.href='/TiepNhan/TiepNhanHoSoMoi';">Thêm</button>
                               <button type="button" class="btn btn-primary" onclick="TiepNhanChinhThuc(@Model.Id)">Tiếp nhận chính thức</button>
                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.SaveAndTranfer.ToString())">Sửa</button>
                               <a type="button" href="/TiepNhan/ViewInPhieu?code=@Model.Id" target="_blank" class="btn btn-primary" style="color: #fff;" >In phiếu</a>
                               <a type="button" href="/TiepNhan/XoaHoSo?Id=@Model.Id" target="_blank" class="btn btn-primary" style="color: #fff;">Xóa</a>
                               <button type="button" class="btn btn-secondary" onclick="window.location.href='/TiepNhan/HoSoChoTiepNhanChuaChinhThuc';">Đóng</button>
                            </div>
                        }
                         @if (ViewBag.type_view == StatusAction.View.ToString() && ViewBag.isSend == false)
                        {
                            <div class="text-center">
                               <button type="submit" class="btn btn-primary"  onclick="window.location.href='/TiepNhan/TiepNhanHoSoMoi';">Thêm</button>
                               <button type="button" class="btn btn-primary" onclick="ChuyenXuLy(@Model.Id)">Chuyển xử lý</button>
                                <button type="button" class="btn btn-primary" onclick="window.location.href='/TiepNhan/SuaHoSo?code=@Model.Id&type=@StatusAction.Edit.ToString()';" name="type_view">Sửa</button>
                               <a type="button" href="/XuLyHoSo/Print?Id=@Model.Id" target="_blank" class="btn btn-primary" style="color: #fff;" >In phiếu hẹn</a>
                               <a type="button" href="/XuLyHoSo/Print?Id=@Model.Id" target="_blank" class="btn btn-primary" style="color: #fff;">In phiếu chuyển</a>
                               <button type="button" class="btn btn-primary" onclick="TraKetQua(@Model.Id)">Trả kết quả</button>
                               <button type="button" class="btn btn-secondary" onclick="window.location.href='/TiepNhan/HoSoDangTiepNhan';">Đóng</button>
                            </div>
                        }
                        @if (ViewBag.type_view == StatusAction.Edit.ToString() && ViewBag.isSend == false)
                        {
                            <div class="text-center">
                               <button type="submit" class="btn btn-primary"   name="type_view" value="@(StatusAction.Edit.ToString())">Lưu</button>
                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.Add.ToString())">Chuyển xử lý</button>
                               @*<button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.SaveAndTranfer.ToString())">Sửa</button>*@
                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.TraKQ.ToString())">In phiếu hẹn</button>
                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.TraKQ.ToString())">In phiếu chuyển</button>
                               <button type="submit" class="btn btn-primary" name="type_view" value="@(StatusAction.TraKQ.ToString())">Trả kết quả</button>
                               <button type="button" class="btn btn-secondary" onclick="window.location.href='/TiepNhan/HoSoDangTiepNhan';">Đóng</button>
                            </div>
                        }
                    </form><!-- End Horizontal Form -->
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Basic Modal -->

<div class="modal fade" id="NotifyVHS" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border: 2px solid #0866c6;">
            <div class="modal-header" style="background-color: #0866c6;">
                <h5 class="modal-title" style="color:white" id="exampleModalLabel">Thông báo</h5>
            </div>
            <div class="modal-body" id="NotifyVHSTitle">
                Lưu vai trò thành công !!!
            </div>
            <div class="modal-footer">
                
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="TraKetQua" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header widgettitle">
                <h5 class="modal-title">TT trả kết quả hồ sơ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                    <div class="row">
                                <div class="form-group row mb-3">
                                    <input type="hidden" id="UserID" name="UserID" />
                                    <label class="col-sm-4 control-label">Tên người nhận</label>
                                    <div class="col-md-8">
                                        <input type="text" name="TenNguoiNhan" id="TenNguoiNhan" value="@Model.CreatedUid" class="form-control" />
                                    </div>
                                </div>

                                 <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Số chứng thực</label>
                                    <div class="col-md-8">
                                        <input type="text" name="SoChungThuc" id="SoChungThuc" value="@Model.so_giay_to" class="form-control" />
                                    </div>
                               </div>
                               <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Địa chỉ</label>
                                    <div class="col-md-8">
                                        <input type="text" name="DiaChi" id="DiaChi" value="@Model.dia_chi" class="form-control" />
                                    </div>
                               </div>
                               
                               <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Người xử lý</label>
                                    <div class="col-md-8">
                                        <select class="form-control" name="NguoiXuLy" id="NguoiXuLy">
                                                    <option value="">Chọn người xử lý</option> 
                                                    @if(LstNguoiDung != null)
                                                    {
                                                        foreach (var item in LstNguoiDung)
                                                        {
                                                            if (item.Id ==  Guid.Parse(Model.nguoi_xu_ly))
                                                            {
                                                                <option value="@item.Id" selected>@(item.ho_dem + item.ten)</option> 
                                                            }else{
                                                                <option value="@item.Id">@(item.ho_dem + item.ten)</option> 
                                                            }
                                                        }
                                                    }
                                        </select>
                                    </div>
                               </div>
                                <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Người ký</label>
                                    <div class="col-md-8">
                                        <select class="form-control" name="NguoiKy" id="NguoiKy">
                                                    <option value="">Chọn người ký</option> 
                                                    @if(LstNguoiDung != null)
                                                    {
                                                        foreach (var item in LstNguoiDung)
                                                        {
                                                            <option value="@item.Id">@(item.ho_dem + item.ten)</option> 
                                                        }
                                                    }
                                        </select>
                                    </div>
                               </div>
                               <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Lệ Phí</label>
                                    <div class="col-md-7">
                                        <input type="text" name="LePhi" id="LePhi" value="@Model.le_phi" class="form-control" />
                                    </div>
                                    <label class="col-md-1 control-label">Vnđ</label>
                               </div>
                               <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Đã thu phí</label>
                                    <div class="col-md-8">
                                        <input type="checkbox" onclick=ThuPhiHoSo()" name="DaThuPhi" @(Model.da_thu_phi == 1 ? "checked": "") id="DaThuPhi" /> 
                                    <script>
                                        function ThuPhiHoSo() {
                                            if ($('#DaThuPhi').is(':checked')) {
                                                $("#DaThuPhi").val(1)
                                            }else{
                                                $("#DaThuPhi").val(0)
                                            }
                                        }
                                    </script>
                                    </div>
                               </div>
                               <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Ý kiến</label>
                                    <div class="col-md-8">
                                        <textarea type="text" name="YKien" id="YKien" class="form-control">@Model.y_kien</textarea> 
                                    </div>
                               </div>
                                <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Đính kèm</label>
                                    <div class="col-md-8">
                                        <div class="input-append">
                                            <input type="file" id="filesDinhKem" name="files" style="display: none">
                                             <input type="text" id="namefilesDinhKem" name="namefilesDinhKem" style="display: none">
                                             <button type="button" onclick="$('#filesDinhKem').click();" class="btn btn-default"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Chọn File</button>
                                             <label type="text" id="dis-filesDinhKem" name="dis-filesDinhKem"  readonly></label> 
                                        </div>                                      
                                    </div>
                               </div>
                               <div class="form-group row mb-3">
                                    <label class="col-sm-4 control-label">Ngày trả kết quả</label>
                                    <div class="col-md-8">
                                        <input type="date" name="NgayTraKetQua" id="NgayTraKetQua" value="@HG.WebApp.Common.HelperDateTime.DateTimeToYYYYMMDD((DateTime)Model.ngay_hen_tra)" class="form-control" />
                                    </div>
                               </div>
                        </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="CapNhatKetQua()">Cập nhật kết quả</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function() {
    
        $('#form_tiepnhan').validate({
            rules: {
                ho_ten: "required",
                ngay_sinh: "required",
                gioi_tinh: "required",
                so_giay_to: "required",
                dien_thoai: "required",
                email: "required",
                dia_chi: "required",
                //ten_to_chuc: "required",
                ten_ho_so: "required",
                ma_linh_vuc: "required",
                ma_thu_tuc_hc: "required",
                ma_luong_xu_ly: "required",
                CreatedDateUtc: "required",
                nguoi_tiep_nhan: "required",
                ngay_hen_tra: "required",
                gio_hen_tra: "required"
            },
            messages: {
                ho_ten: "Bạn chưa nhập tên khách hàng!",
                ngay_sinh: "Bạn chưa nhập ngày sinh!",
                gioi_tinh: "Bạn chưa nhập giới tính!",
                so_giay_to: "Bạn chưa nhập số giấy tờ!",
                dien_thoai: "Bạn chưa nhập điện thoại!",
                email: "Bạn chưa nhập emai!",
                dia_chi: "Bạn chưa nhập địa chỉ!",
                //ten_to_chuc: "Bạn chưa nhập tên tổ chức!",
                ten_ho_so: "Bạn chưa nhập tên hồ sơ!",
                ma_linh_vuc: "Bạn chưa nhập mã lĩnh vực!",
                ma_thu_tuc_hc: "Bạn chưa nhập mã thủ tục hành chính!",
                ma_luong_xu_ly: "Bạn chưa nhập mã luồng xử lý!",
                CreatedDateUtc: "Bạn chưa nhập ngày tạo!",
                nguoi_tiep_nhan: "Bạn chưa nhập tên người tiếp nhận!",
                ngay_hen_tra: "Bạn chưa nhập ngày hẹn trả!",
                gio_hen_tra: "Bạn chưa nhập giờ hẹn trả!"
            }
        });
        function convetArrayToObj(serialized) {
            var FormHelper = {};
            var s = '';
            var data = {};
            for (s in serialized) {
                if (serialized[s]['name'] != 'query')
                    data[serialized[s]['name']] = serialized[s]['value']
            }
            return JSON.parse(JSON.stringify(data));
        };
         $('#ma_nhom').on('keypress', function(e) {
            if (e.which == 32 || e.which > 200){
                return false;
            }
        });
 });        
    function ChuyenXuLy(ho_so_id){
             $.ajax({
                      type: "GET",
                      url: "/ApiHoSo/ChuyenXuLy?ho_so_id=" + ho_so_id,
                      data: "",
                      contentType: 'application/json; charset=utf-8',
                      success: function(data) {
                          $("#NotifyVHSTitle").html(data);
                          $("#NotifyVHS").modal("show");
                      }
              });           
        }
    function SuaHoSo(id,type){
         $.ajax({
                  type: "GET",
                   url: "/TiepNhan/SuaHoSo?code=" + id + "&type=" + type,
                  data: "",
                  contentType: 'application/json; charset=utf-8',
                  success: function(data) {
                    window.location.href='/TiepNhan/SuaHoSo?code='+id+'&type=Edit'
                  }
          });           
    }
    function TiepNhanChinhThuc(ho_so_id){
         $.ajax({
                  type: "GET",
                  url: "/ApiHoSo/TiepNhanChinhThuc?ho_so_id=" + ho_so_id,
                  data: "",
                  contentType: 'application/json; charset=utf-8',
                  success: function(data) {
                      $("#NotifyVHSTitle").html(data);
                      $("#NotifyVHS").modal("show");
                  }
          });           
    }
    function TraKetQua(ho_so_id){
         $("#TraKetQua").modal("show");
    }
    function CapNhatKetQua(){
         $.ajax({
                  type: "GET",
                  url: "/ApiHoSo/TraKetQua?ho_so_id=" + ho_so_id + "&NguoiKy=" + $("#NguoiKy").val() + "&LePhi=" + $("#LePhi").val() + "&DaThuPhi=" + $("#DaThuPhi").val() + "&YKien=" + $("#YKien").val() + "&filedinhkem=" + $("#namefilesDinhKem").val() ,
                  data: "",
                  contentType: 'application/json; charset=utf-8',
                  success: function(data) {
                      $("#NotifyVHSTitle").html(data);
                      $("#NotifyVHS").modal("show");
                  }
          });           
    }
    function DeleteFileDinhKemTP(filenumber){
        if (filenumber == 1) {
            $('#file_dinh_kem1').attr('value', "");
            $('btnDelete1').setAttribute('style', 'display:none');
        } else if (filenumber == 2) {
            $('#file_dinh_kem2').attr('value', "");
            $('btnDelete2').setAttribute('style', 'display:none');
        } else if (filenumber == 3) {
            $('#file_dinh_kem3').attr('value', "");
            $('btnDelete3').setAttribute('style', 'display:none');
        } else if (filenumber == 4) {
            $('#file_dinh_kem4').attr('value', "");
            $('btnDelete4').setAttribute('style', 'display:none');
        } else {
            $('#file_dinh_kem5').attr('value', "");
            $('btnDelete5').setAttribute('style', 'display:none');
        }
    }
    $(document).ready(function() {
        $("#files1").on('change', function () {
            // Checking whether FormData is available in browser
            if (window.FormData !== undefined) {
                var fileUpload = $(this).get(0);
                var files = fileUpload.files;
                // Create FormData object
                var fileData = new FormData();
                // Looping over all files and add it to FormData object
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                if (files[0].size > 31457280) {
                        alert("File tải lên không vượt quá 5MB");
                        return;
                }
                // Adding one more key to FormData object
                fileData.append('username', 'Manas');
                $.ajax({
                    url: '/Upload/UploadFiles?folder=ThanhPhanTTHCNew' ,
                    type: "POST",
                    contentType: false, // Not to set any content header
                    processData: false, // Not to process data
                    data: fileData,
                    success: function (result) {
                        console.log(result);
                        for (var i = 0; i < result.files.length; i++) {
                              $('#file_dinh_kem1').attr('value', result.files[i]);
                              $('#namefile1').html(""+result.names+"");
                              $("#btnDelete1").show();
                        }
                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        });

        $("#files2").on('change', function () {
            // Checking whether FormData is available in browser
            if (window.FormData !== undefined) {
                var fileUpload = $(this).get(0);
                var files = fileUpload.files;
                // Create FormData object
                var fileData = new FormData();
                // Looping over all files and add it to FormData object
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                if(files[0].size > 5146624 )
                {
                        alert("File tải lên không vượt quá 5MB");
                        return;
                }
                // Adding one more key to FormData object
                fileData.append('username', 'Manas');
                $.ajax({
                    url: '/Upload/UploadFiles?folder=ThanhPhanTTHCNew' ,
                    type: "POST",
                    contentType: false, // Not to set any content header
                    processData: false, // Not to process data
                    data: fileData,
                    success: function (result) {
                        console.log(result);
                        for (var i = 0; i < result.files.length; i++) {
                              $('#file_dinh_kem2').attr('value', result.files[i]);
                              $('#namefile2').html(""+result.names+"");
                              $("#btnDelete2").show();
                        }
                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        });
        $("#files3").on('change', function () {
            // Checking whether FormData is available in browser
            if (window.FormData !== undefined) {
                var fileUpload = $(this).get(0);
                var files = fileUpload.files;
                // Create FormData object
                var fileData = new FormData();
                // Looping over all files and add it to FormData object
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                if(files[0].size > 31457280 )
                {
                        alert("File tải lên không vượt quá 5MB");
                        return;
                }
                // Adding one more key to FormData object
                fileData.append('username', 'Manas');
                $.ajax({
                    url: '/Upload/UploadFiles?folder=ThanhPhanTTHCNew' ,
                    type: "POST",
                    contentType: false, // Not to set any content header
                    processData: false, // Not to process data
                    data: fileData,
                    success: function (result) {
                        console.log(result);
                        for (var i = 0; i < result.files.length; i++) {
                              $('#file_dinh_kem3').attr('value', result.files[i]);
                              $('#namefile3').html(""+result.names+"");
                              $("#btnDelete3").show();
                        }
                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        });
        $("#files4").on('change', function () {
            // Checking whether FormData is available in browser
            if (window.FormData !== undefined) {
                var fileUpload = $(this).get(0);
                var files = fileUpload.files;
                // Create FormData object
                var fileData = new FormData();
                // Looping over all files and add it to FormData object
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                if (files[0].size > 31457280) {
                        alert("File tải lên không vượt quá 5MB");
                        return;
                }
                // Adding one more key to FormData object
                fileData.append('username', 'Manas');
                $.ajax({
                    url: '/Upload/UploadFiles?folder=ThanhPhanTTHCNew' ,
                    type: "POST",
                    contentType: false, // Not to set any content header
                    processData: false, // Not to process data
                    data: fileData,
                    success: function (result) {
                        console.log(result);
                        for (var i = 0; i < result.files.length; i++) {
                              $('#file_dinh_kem4').attr('value', result.files[i]);
                              $('#namefile4').html(""+result.names+"");
                              $("#btnDelete4").show();
                        }
                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        });
        $("#files5").on('change', function () {
            // Checking whether FormData is available in browser
            if (window.FormData !== undefined) {
                var fileUpload = $(this).get(0);
                var files = fileUpload.files;
                // Create FormData object
                var fileData = new FormData();
                // Looping over all files and add it to FormData object
                for (var i = 0; i < files.length; i++) {
                    fileData.append(files[i].name, files[i]);
                }
                if (files[0].size > 31457280) {
                    alert("File tải lên không vượt quá 5MB");
                    return;
                }
                // Adding one more key to FormData object
                fileData.append('username', 'Manas');
                $.ajax({
                    url: '/Upload/UploadFiles?folder=ThanhPhanTTHCNew' ,
                    type: "POST",
                    contentType: false, // Not to set any content header
                    processData: false, // Not to process data
                    data: fileData,
                    success: function (result) {
                        console.log(result);
                        for (var i = 0; i < result.files.length; i++) {
                              $('#file_dinh_kem5').attr('value', result.files[i]);
                              $('#namefile5').html(""+result.names+"");
                              $("#btnDelete5").show();
                        }
                    },
                    error: function (err) {
                        alert(err.statusText);
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        });
     });
</script>



