@using HG.WebApp
@{
    ViewData["Title"] = "Sổ Hồ Sơ";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    var LstPhongBan = ViewBag.LstPhongBan as List<HG.Entities.Dm_Phong_Ban>;
}
@model HG.Entities.Entities.ThuTuc.ThuTucPaging

<script src="/BackEnd/Admin/plugin/ckeditor/ckeditor.js"></script>
<div class="card">
    <div class="card-body">
        <div class="pageheader">
            <div class="searchbar">
                <input name="ctl08$Search" type="text" id="Search" placeholder="Gõ từ khóa và nhấn enter..." />
                <input type="submit" name="ctl08$BtnSearch" value="" onclick="return CheckSearch();" id="BtnSearch" hidden="hidden" />
            </div>
            <div class="pageicon"><span class="iconfa-table"></span></div>
            <div class="pagetitle">
                <h5>Danh sách</h5>
                <h1>Thủ tục hành chính</h1>
            </div>
        </div>
        <div class="maincontent">
            <!-- Pills Tabs -->
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Quản lý thủ tục hành chính</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Quản lý biểu mẫu</button>
                </li>
            </ul>

            <div class="tab-content pt-2" id="myTabContent">
                @*TAB Quản lý thủ tục hành chính*@
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="home-tab">
                    <p class="stdformbutton" style="margin-bottom: 10px;">
                        <input type="submit" name="" value="Thêm" id="" onclick="window.location.href = '/ThuTuc/ThemThuTuc';" class="btn btn-primary" style="width:100px;" />

                        <input type="submit" name="" value="Xóa" onclick="" id="" class="btn btn-primary" style="width:100px;" />
                    </p>
                    <div class="widget">
                        <h4 class="widgettitle">Lọc danh sách theo</h4>
                        <div class="widgetcontent">
                            <div class="form-group">
                                <label for="inputPassword" class="col-md-2 control-label" style="text-align: right">Phòng ban</label>
                                <div class="col-md-10">
                                    <select name="ctl08$ddlPhongBan" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl08$ddlPhongBan\&#39;,\&#39;\&#39;)&#39;, 0)" id="ctl08_ddlPhongBan" class="form-control input-default">
                                        <option selected="selected" value="------- Chọn Phòng Ban -------">------- Chọn phòng ban -------</option>
                                        @if (LstPhongBan != null)
                                        {
                                            foreach (var item in LstPhongBan)
                                            {
                                                <option value="@item.ma_phong_ban">@item.ten_phong_ban</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="dyntable_wrapper" class="dataTables_wrapper" role="grid">
                        <div id="dyntable_length" class="dataTables_length">
                            <label>
                                Hiển thị
                                <select size="1" name="dyntable_length" aria-controls="dyntable">
                                    <option value="10">10</option>
                                    <option value="25" selected="selected">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select> bản ghi
                            </label>
                        </div>
                        <div id="dataTable">
                            <div class="dataTable-container">
                                <table class="table table-bordered responsive">
                                    <thead class="widgettitle">
                                        <tr>
                                            <th class="head0 nosort" scope="col" data-sortable="" style="width: 5%;">
                                                <input type="checkbox" name="" id="selectAll" />
                                            </th>                                      

                                            <th class="head0" scope="col" data-sortable="" style="width: 5%;">STT</th>
                                            <th class="head1" scope="col" data-sortable="" style="width: 45%;">TÊN</th>
                                            <th class="head0" scope="col" data-sortable="" style="width: 20%;">LĨNH VỰC</th>
                                            <th class="head1" scope="col" data-sortable="" style="width: 5%;">LUỒNG</th>
                                            <th class="head0" scope="col" data-sortable="" style="width: 5%;">OL</th>
                                            <th class="head1" scope="col" data-sortable="" style="width: 5%;">LT</th>
                                            <th class="head0" scope="col" data-sortable="" style="width: 5%;">#</th>
                                            <th class="head1" scope="col" data-sortable="" style="width: 5%;">#</th>
                                            <th class="head0" scope="col" data-sortable="" style="width: 5%;">#</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model.lstThuTuc != null)
                                        {
                                            var stt = 1;
                                            foreach (var item in Model.lstThuTuc)
                                            {
                                                <tr>
                                                    <td><input type="checkbox" class="ads_Checkbox" value="@item.ma_thu_tuc" /></td>
                                                    <td scope="row">
                                                        @stt
                                                        <input type="hidden" name="" id="" value="@item.ma_thu_tuc" />
                                                    </td>
                                                    <td><a href="/ThuTuc/SuaThuTuc?code=@item.ma_thu_tuc&type=@(StatusAction.View.ToString())">@item.ten_thu_tuc</a></td>

                                                    <td>@item.ten_linh_vuc</td>
                                                    <td>@item.luong</td>
                                                    <td>@item.nop_online</td>
                                                    <td>@item.cho_phep_lien_thong</td>
                                                    <td>
                                                        <a id="" title="" data-placement="top" data-toggle="tooltip" data-original-title="Xem" href="/ThuTuc/SuaThuTuc?code=@item.ma_thu_tuc&type=@(StatusAction.View.ToString())">
                                                            <span class="glyphicon glyphicon-list-alt">Xem</span>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a id="" title="" data-placement="top" data-toggle="tooltip" data-original-title="Sửa" href="/ThuTuc/SuaThuTuc?code=@item.ma_thu_tuc&type=@(StatusAction.Edit.ToString())">
                                                            <span class="glyphicon glyphicon-edit">Sửa</span>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a onclick="confirm.BeforDeletePost('/ThuTuc/XoaThuTuc?code=@item.ma_thu_tuc')"
                                                   title=""
                                                   data-placement="top"
                                                   data-toggle="tooltip"
                                                   data-original-title="Xóa"
                                                   href="#">
                                                            <span class="glyphicon glyphicon-trash">Xóa</span>
                                                        </a>
                                                    </td>
                                                </tr>
                                                stt++;
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>

                            <div class="dataTables_info" id="dyntable_info">Hiển thị @ViewBag.RecoredFrom đến  @ViewBag.RecoredTo của @Model.Pagelist.TotalRecords bản ghi</div>
                            <div class="dataTables_paginate paging_full_numbers" id="dyntable_paginate">
                                @{
                                    var TotalPage = (int)ViewBag.TotalPage;
                                    var CurrentPage = (int)ViewBag.CurrentPage;
                                    if (TotalPage > 5)
                                    {
                                        if (CurrentPage > CurrentPage + 2)
                                        {
                                            <span><a class="first paginate_button paginate_button_disabled" onclick="GetListByCurrentPage(1)">Đầu</a></span>
                                            <span><a class="first paginate_button paginate_button_disabled" onclick="GetListByCurrentPage(@CurrentPage - 1)">Trước</a></span>
                                        };
                                        if (CurrentPage > 3)
                                        {
                                            for (int i = CurrentPage - 2; i < CurrentPage + 2; i++)
                                            {
                                                if (i == CurrentPage)
                                                {
                                                    <span><a tabindex="0" class="active paginate_active" onclick="GetListByCurrentPage(@i)">@i</a></span>
                                                }
                                                else
                                                {
                                                    <span><a tabindex="0" class=" paginate_active" onclick="GetListByCurrentPage(@i)">@i</a></span>
                                                }
                                            }
                                        }
                                        else
                                        {
                                            for (int i = 1; i <= 5; i++)
                                            {
                                                if (i == CurrentPage)
                                                {
                                                    <span><a tabindex="0" class="active paginate_active" onclick="GetListByCurrentPage(@i)">@i</a></span>
                                                }
                                                else
                                                {
                                                    <span><a tabindex="0" class=" paginate_active" onclick="GetListByCurrentPage(@i)">@i</a></span>
                                                }
                                            }

                                        }

                                        if (CurrentPage < CurrentPage + 2)
                                        {
                                            <span> <a class="first paginate_button paginate_button_disabled" onclick="GetListByCurrentPage(@CurrentPage + 1)">Trước</a></span>
                                            <span><a class="first paginate_button paginate_button_disabled" onclick="GetListByCurrentPage(@TotalPage)">Cuối</a></span>
                                        };
                                    }
                                    else
                                    {
                                        for (int i = 1; i <= TotalPage; i++)
                                        {
                                            if (i == CurrentPage)
                                            {
                                                <span><a tabindex="0" class="active paginate_active" onclick="GetListByCurrentPage(@i)">@i</a></span>
                                            }
                                            else
                                            {
                                                <span><a tabindex="0" class=" paginate_active" onclick="GetListByCurrentPage(@i)">@i</a></span>
                                            }
                                        }
                                    }
                                }
                            </div>
                        </div>
                    </div>
                </div>
                @*TAB Quản lý biểu mẫu*@
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="profile-tab">
                    <p class="stdformbutton" style="margin-bottom: 10px;">
                        <input type="submit" name="ctl08$BtnAdd" value="Thêm" id="" class="btn btn-primary" style="width:100px;" />
                    </p>
                    <table class="table table-bordered responsive">
                        <thead class="widgettitle">
                            <tr>
                                <th class="head0">Sửa</th>
                                <th class="head0">Xem biểu mãu HTML</th>
                                <th class="head0">Đường dẫn</th>
                                <th class="head0">Xem biểu mẫu</th>
                            </tr>
                        </thead>
                        <tr>
                            <td> <a href="#">Sửa</a></td>
                            <td> <a href="#">fileNam</a></td>
                            <td> <a href="#">UrlFile</a></td>
                            <td> <a href="#">Xem</a></td>
                        </tr>
                    </table>
                    <div class="row mb-3">
                        <div class="col-sm-12">
                            <textarea id="ckedit1" class="form-control input-default" placeholder="Mô tả" name="mo_ta"></textarea>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-6" style="display: -webkit-inline-box;">
                            <label for="stt" class="control-label" style="padding: 10px;">Tên file</label>
                            <input type="text" class="form-control input-default" name="ten_file" value="" placeholder="Tên file">
                            <button class="col-sm-1 control-label btn btn-primary" style="float:right">Lưu</button>
                        </div>
                        <div class="col-sm-6">
                            <button class="control-label btn btn-primary" style="float:right">Đóng</button>
                        </div>
                    </div>
                </div>
            </div>


        </div><!-- End Pills Tabs -->

    </div>
</div>
<script>

    CKEDITOR.replace('ckedit1');

</script>  